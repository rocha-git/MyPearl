<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <title>Minha PÃ©rola</title>
</head>

<body>
    <div id="card">
        <h2 id="titulo">Moments</h2>
        <p id="fraseEscolhida"></p>
        <button id="gerarFrase"><i id="heart" style="transform: scale(2.0);" class='bx bxs-heart'></i></button>
    </div>

    <ul id="frases" style="display: none;">
        <li>Aqui estÃ£o alguns dos momentos em que vivemos.ï¼ˆ*ï¼¾-ï¼¾*ï¼‰</li>
        <li>Eu escrevi eles em frases, e a cada "clique" irÃ¡ gerar um momento nosso.\^o^/</li>
        <li>VocÃª deve ter reparado que apareceram dois botÃµes, um de like e outro de dislike.(âŒâ– _â– )</li>
        <li>Sua missÃ£o Ã© apenas dar like pra cada momento que vocÃª mais gostou, e deslike pra um que vocÃª nÃ£o
            gostou tanto.( Â´ï½¥ï½¥)ï¾‰(._.`)</li>
        <li>â˜¢Mas cuidadoâ˜¢, o nÃºmero de likes e deslikes sÃ£o limitados, use com sabedoria.<br>ãƒ¾(ï¿£â–½ï¿£)<br><br>Obs: NÃ£o
            precisa zerar os nÃºmeros.</li>
        <li>Boa sorte Mozi.(â¤ Ï‰ â¤)</li>
        <li>Compras no supermercado.ğŸ›’</li>
        <li>Zerar um jogo.ğŸ®</li>
        <li>Ir Ã  missa.â›ª</li>
        <li>Passear no Shopping.ğŸ¬</li>
        <li>Assistir anime.ğŸ¬</li>
        <li>Comprar Stardew Valley.â›º</li>
        <li>Ficar de madrugada Assistindo Shingeki.ğŸ¬</li>
        <li>Planejar tarefas/viagens.ğŸ§³</li>
        <li>Ouvir mÃºsicas juntos.ğŸ§</li>
        <li>Andar pelo centro.ğŸš¶â€â™‚ï¸</li>
        <li>Nossa primeira vez.ğŸ˜</li>
        <li>RolÃª no bar.ğŸº</li>
        <li>Mr Mix.ğŸ¦</li>
        <li>Dog Mania.ğŸŒ­</li>
        <li>Primeiro dia juntos.ğŸ‘«</li>
        <li>Primeiro Beijo.ğŸ˜½</li>
        <li>Ouvir "eu te amo".â£</li>
        <li><a href="https://open.spotify.com/playlist/413zLTEdFbINntPIlBZugl?si=NF2NUOiBRA2zTqLxMbXCOg"
                id="play-btn"><i style="transform: scale(2.5);" class='bx bxl-deezer' id="music"></i></a></li>
        <li></li>


    </ul>
    <div id="feedback">
        <button id="btnLike">
            <i class='bx bxs-like' id="like"></i>
        </button>
        <p id="nLike">8</p>
        <button id="btnDislike">
            <i class='bx bxs-dislike' id="dislike"></i>
        </button>
        <p id="nDislike">8</p>
    </div>

    <script>
        const frases = document.querySelectorAll("#frases li");
        const botao = document.querySelector("#gerarFrase");
        const fraseEscolhida = document.getElementById("fraseEscolhida");
        const btnLike = document.querySelector("#btnLike");
        const nLike = document.getElementById("nLike");
        const btnDislike = document.querySelector("#btnDislike");
        const nDislike = document.getElementById("nDislike")
        const titulo = document.getElementById("titulo");

        var contadorLike = 8;
        var contadorDislike = 8;
        var indiceAtual = 0;
        var ultimoIndice = frases.length - 1;

        function escreverFrase(texto, elemento, velocidade = 21) {
            let i = 0;
            elemento.innerHTML = "";
            function digitar() {
                if (i < texto.length) {
                    // Verifica se encontrou uma tag HTML (ex: <br>)
                    if (texto[i] === "<") {
                        let tag = "";
                        while (i < texto.length && texto[i] !== ">") {
                            tag += texto[i];
                            i++;
                        }
                        tag += texto[i]; // adiciona o '>'
                        i++;
                        elemento.innerHTML += tag;
                    } else {
                        elemento.innerHTML += texto[i];
                        i++;
                    }
                    setTimeout(digitar, velocidade);
                }
            }
            digitar();
        }

        fraseEscolhida.textContent = "Clique e descubra (âˆª.âˆª )...zzz"
        botao.addEventListener("click", function () {

            titulo.style.opacity = "1";
            if (indiceAtual <= frases.length) {
                let texto = frases[indiceAtual].innerHTML;
                escreverFrase(texto, fraseEscolhida, 25);

                document.getElementById("like").style.color = "white";
                document.getElementById("dislike").style.color = "white";

                if (indiceAtual === ultimoIndice && contadorDislike > contadorLike) {
                    escreverFrase("ParabÃ©ns, vocÃª gastou mais LIKE que DISLIKE! Receba sua recompensa:<br><br>1 - Colete o item em baixo do colchÃ£o.(1)<br>2 - Vale Massagem.(2)<br>3 - Vale atenÃ§Ã£o MÃ¡xima.(3)<br> 4 - Vale 'Posso fazer o que quiser'.(1)", fraseEscolhida);
                    botao.style.display = "none";
                    return;
                }
                if (indiceAtual === ultimoIndice && contadorDislike < contadorLike) {
                    fraseEscolhida.innerHTML = "ParabÃ©ns, vocÃª gastou mais DISLIKE que LIKE, portanto irÃ¡ receber apenas uma recompensa! Receba sua recompensa:<br><br>1 - Colete o item em baixo do colchÃ£o.(1)";
                    botao.style.display = "none";
                    return;
                }
                if (indiceAtual === 2) {
                    document.getElementById("feedback").style.opacity = "1";
                }
                if (indiceAtual === 3) {
                    nLike.style.opacity = "1";
                    nDislike.style.opacity = "1";
                }
                if (indiceAtual === 4) {
                    nLike.classList.add("piscar");
                    nDislike.classList.add("piscar");
                }
                if (indiceAtual === 5) {
                    nLike.classList.remove("piscar");
                    nDislike.classList.remove("piscar");
                }
                if (indiceAtual === 6) {
                    titulo.innerHTML = "ComeÃ§ou!"
                    fraseEscolhida.style.borderStyle = "dotted";
                }
                indiceAtual++;
                //indiceAtual = (indiceAtual + 1) % frases.length; // reinicia quando chega ao fim
            }
        });

        btnLike.addEventListener("click", function () {
            contadorLike--;
            nLike.innerHTML = contadorLike;
            document.getElementById("like").style.color = "#ff009d";
        });

        btnDislike.addEventListener("click", function () {
            contadorDislike--;
            nDislike.innerHTML = contadorDislike;
            document.getElementById("dislike").style.color = "#ff009d";
        });
    </script>

</body>

</html>
